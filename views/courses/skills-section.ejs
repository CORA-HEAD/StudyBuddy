<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudyBuddy - Skills</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }

        .skills {
            position: relative;
            min-height: 400px;
            padding: 20px;
            box-sizing: border-box;
        }

        .skills h2 {
            color: #007bff;
            text-align: center;
        }

        .skills p {
            text-align: center;
            margin-bottom: 20px;
            color: #555;
        }

        .category-heading {
            text-align: center;
            margin-top: 40px;
            font-size: 24px;
            color: #007bff;
        }

        .course-carousel {
            position: relative;
        }

        .course-list {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            padding: 10px 0;
            scroll-behavior: smooth;
            scroll-snap-type: x mandatory;
        }

        .course-list::-webkit-scrollbar {
            display: none;
        }

        .course-list {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .course-card {
            background-color: #e0e0e0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(133, 130, 130, 0.1);
            padding: 15px;
            flex: 0 0 300px;
            height: 340px;
            text-align: center;
            box-sizing: border-box;
            overflow: hidden;
            position: relative;
            scroll-snap-align: start;
            color: #333;
        }

        .course-card:hover {
            transform: scale(1.01);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.311);
        }

        .course-card img {
            width: 100%;
            height: 140px;
            border-radius: 8px;
            margin-bottom: 10px;
            object-fit: cover;
        }

        .course-card h3 {
            font-size: 18px;
            margin-bottom: 5px;
            color: #333;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .course-card p.description {
            font-size: 14px;
            color: #555;
            margin: 5px 0;
            max-height: 40px;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .course-card .price {
            font-size: 15px;
            font-weight: bold;
            color: #27ae60;
            margin-top: 10px;
        }

        .level-tag {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            margin-top: 10px;
        }

        .beginner {
            background-color: #e0f2f1;
            color: #28a745;
        }

        .intermediate {
            background-color: #e0f2f1;
            color: #ffc107;
        }

        .advanced {
            background-color: #e0f2f1;
            color: #dc3545;
        }

        #no-courses {
            text-align: center;
            margin: 30px auto;
        }

        .scroll-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(255, 255, 255, 0.8);
            color: #333;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            z-index: 1;
        }

        .scroll-btn.left {
            left: 0;
        }

        .scroll-btn.right {
            right: 0;
        }

        .scroll-btn:hover {
            background-color: #fff;
        }

        .course-link {
            text-decoration: none;
            color: inherit;
        }

        .course-link:hover {
            text-decoration: none;
            color: inherit;
        }

        @media (max-width: 768px) {
            .course-card {
                flex: 0 0 240px;
                height: auto;
            }

            .scroll-btn {
                display: none;
            }
        }
    </style>

</head>

<body>
    <section class="skills">
        <h2>All the skills you need in one place</h2>
        <p>From critical skills to technical topics, StudyBuddy supports your professional development.</p>
    
        <!-- Skill Categories and their Courses -->
        <% categories.forEach(category => { %>
            <div id="<%= category.category_id %>" class="category-section">
                <h3 class="category-heading"><%= category.name %></h3>
                <div class="course-carousel">
                    <button class="scroll-btn left" aria-label="Scroll left">&lt;</button>
                    <div class="course-list">
                        <% if (category.courses && category.courses.length > 0) { %>
                            <% category.courses.forEach(course => { %>
                                <div id="course-<%= course.course_id %>" class="course-card">
                                    <a href="/course/<%= course.course_id %>" class="course-link">
                                        <img src="<%= course.image_path %>" alt="<%= course.title %>">
                                        <h3><%= course.title %></h3>
                                        <p class="description"><%= course.description %></p>
                                        <p class="price">
                                            <% if (course.price === '0.00') { %>
                                                Free
                                            <% } else { %>
                                                $<%= course.price %>
                                            <% } %>
                                        </p>
                                        <span class="level-tag <%= course.level %>">
                                            <%= course.level.charAt(0).toUpperCase() + course.level.slice(1) %>
                                        </span>
                                    </a>
                                </div>
                            <% }) %>
                        <% } else { %>
                            <p id="no-courses">No courses available for this category.</p>
                        <% } %>
                    </div>
                    <button class="scroll-btn right" aria-label="Scroll right">&gt;</button>
                </div>
            </div>
        <% }) %>
    </section>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const carousels = document.querySelectorAll('.course-carousel');

            carousels.forEach(carousel => {
                const container = carousel.querySelector('.course-list');
                const leftBtn = carousel.querySelector('.scroll-btn.left');
                const rightBtn = carousel.querySelector('.scroll-btn.right');
                const cardWidth = document.querySelector('.course-card').offsetWidth + 20; // Include gap

                function updateScrollButtons() {
                    const maxScrollLeft = container.scrollWidth - container.clientWidth;
                    leftBtn.style.display = container.scrollLeft > 0 ? 'block' : 'none';
                    rightBtn.style.display = container.scrollLeft < maxScrollLeft ? 'block' : 'none';
                }

                leftBtn.addEventListener('click', () => {
                    container.scrollBy({ left: -cardWidth, behavior: 'smooth' });
                });

                rightBtn.addEventListener('click', () => {
                    container.scrollBy({ left: cardWidth, behavior: 'smooth' });
                });

                container.addEventListener('scroll', updateScrollButtons);
                window.addEventListener('resize', updateScrollButtons);

                updateScrollButtons();
            });
        });
    </script>
</body>

</html>
